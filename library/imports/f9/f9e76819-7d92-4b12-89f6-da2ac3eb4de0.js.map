{"version":3,"sources":["../../../../assets/script/assets/script/Play.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/script","sourcesContent":["// Learn TypeScript:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/typescript.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class Play extends cc.Component {\n\n    // @property(cc.Label)\n    // label: cc.Label = null;\n\n    // @property\n    // text: string = 'hello';\n    //跳跃高度\n    @property\n    jumpHeight:number = 0;\n    //跳跃持续时间\n    @property\n    jumpDuration:number = 0;\n    //最大的移动距离\n    @property\n    maxMoveSpeed:number = 0;\n    //加速度\n    @property\n    accel:number = 0;\n    @property\n    accLeft:boolean = false;\n    @property\n    accRight:boolean = false;\n    @property\n    xSpeed:number = 0;\n    @property({type:cc.AudioClip})\n    jumpAudio\n\n     // 生命周期\n    public onLoad () {\n        this.enabled = false;\n    //   //this代表绑定的当前组件\n    //   this.node.runAction(this.setJumpAction());\n      cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN, this.onKeyDown, this);\n      cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP, this.onKeyUp, this);\n    }\n    \n\n    // start () {\n\n    // }\n\n    public update (dt) {\n        //dt每一帧运行的时间\n        if(this.accLeft) {\n            this.xSpeed -= this.accel*dt\n        } else if(this.accRight){\n            this.xSpeed += this.accel*dt\n        }\n\n        if(Math.abs(this.xSpeed) > this.maxMoveSpeed) {\n            this.xSpeed = this.maxMoveSpeed * this.xSpeed/Math.abs(this.xSpeed)   \n        }\n        //100像素/秒  60帧/秒 ？1帧多少像素\n        console.log(this.node.x);\n        console.log(this.node.parent.width/2)\n        this.node.x += this.xSpeed * dt;\n        if(this.node.x > this.node.parent.width/2){\n            this.node.x = this.node.parent.width/2;\n            this.xSpeed = 0;\n        }else if(this.node.x < -this.node.parent.width/2){\n            this.node.x = -this.node.parent.width/2;\n            this.xSpeed = 0;\n        }\n    }\n    //初始化函数\n    public init(pos){\n        this.enabled = true;\n        this.xSpeed = 0;\n        this.node.setPosition(pos)\n        //this代表绑定的当前组件\n       this.node.runAction(this.setJumpAction());\n    }\n\n    public onDestroy () {\n      cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)\n      cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)\n    }\n\n\n   //弹跳\n    public setJumpAction(){\n        let jumpUp = cc.moveBy(this.jumpDuration,cc.v2(0,this.jumpHeight)).easing(cc.easeCubicActionOut());\n        let jumpDown = cc.moveBy(this.jumpDuration,cc.v2(0,-this.jumpHeight)).easing(cc.easeCubicActionIn());\n        let callBack = cc.callFunc(this.palyerSond,this);\n        return cc.repeatForever(cc.sequence(jumpUp,jumpDown,callBack));\n    }\n    //引入音乐\n    public palyerSond(){\n        cc.audioEngine.playEffect(this.jumpAudio,false)\n    }\n    //按键\n    public onKeyDown(event){\n        switch(event.keyCode) {\n            case cc.macro.KEY.a:\n                this.accLeft = true;\n                break;\n            case cc.macro.KEY.b:\n                this.accRight = true;\n                break;\n        }\n\n    }\n    public onKeyUp(event){\n        switch(event.keyCode) {\n            case cc.macro.KEY.a:\n                this.accLeft = false;\n                break;\n            case cc.macro.KEY.b:\n                this.accRight = false;\n                break;\n        }\n    }\n}\n"]}